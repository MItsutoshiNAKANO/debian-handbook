<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.2. aptitude, apt-get, and apt Commands</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="El libro del administrador de Debian" /><link
        rel="up"
        href="apt.html"
        title="Capítulo 6. Mantenimiento y actualizaciones: las herramientas APT" /><link
        rel="prev"
        href="apt.html"
        title="Capítulo 6. Mantenimiento y actualizaciones: las herramientas APT" /><link
        rel="next"
        href="sect.apt-cache.html"
        title="6.3. La orden apt-cache" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/es-ES/sect.apt-get.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Anterior</strong></a></li><li
          class="home">El libro del administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.apt-get"></a>6.2. <code
                  class="command">aptitude</code>, <code
                  class="command">apt-get</code>, and <code
                  class="command">apt</code> Commands</h2></div></div></div><a
          id="idm139627319349344"
          class="indexterm"></a><a
          id="idm139627319348224"
          class="indexterm"></a><a
          id="idm139627319347104"
          class="indexterm"></a><div
          class="para">
			APT is a vast project, whose original plans included a graphical interface. It is based on a library which contains the core application, and <code
            class="command">apt-get</code> is the first front end — command-line based — which was developed within the project. <code
            class="command">apt</code> is a second command-line based front end provided by APT which overcomes some design mistakes of <code
            class="command">apt-get</code>.
		</div><div
          class="para">
			Numerous other graphical interfaces then appeared as external projects: <code
            class="command">synaptic</code>, <code
            class="command">aptitude</code> (which includes both a text mode interface and a graphical one — even if not complete yet), <code
            class="command">wajig</code>, etc. The most recommended interface, <code
            class="command">apt</code>, is the one that we will use in the examples given in this section. Note however that <code
            class="command">apt-get</code> and <code
            class="command">aptitude</code> have a very similar command line syntax. When there are major differences between <code
            class="command">apt</code>, <code
            class="command">apt-get</code> and <code
            class="command">aptitude</code>, these differences will be detailed.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm139627319339056"></a>6.2.1. Inicialización</h3></div></div></div><div
            class="para">
				For any work with APT, the list of available packages needs to be updated; this can be done simply through <code
              class="command">apt update</code>. Depending on the speed of your connection, the operation can take a while since it involves downloading a certain number of <code
              class="filename">Packages</code>/<code
              class="filename">Sources</code>/<code
              class="filename">Translation-<em
                class="replaceable">language-code</em></code> files, which have gradually become bigger and bigger as Debian has developed (at least 10 MB of data for the <code
              class="literal">main</code> section). Of course, installing from a CD-ROM set does not require any downloading — in this case, the operation is very fast.
			</div><a
            id="idm139627319334640"
            class="indexterm"></a><a
            id="idm139627319333520"
            class="indexterm"></a><a
            id="idm139627319332400"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm139627319331120"></a>6.2.2. Instalación y eliminación</h3></div></div></div><a
            id="idm139627319330352"
            class="indexterm"></a><a
            id="idm139627319328912"
            class="indexterm"></a><a
            id="idm139627319327472"
            class="indexterm"></a><a
            id="idm139627319326032"
            class="indexterm"></a><div
            class="para">
				With APT, packages can be added or removed from the system, respectively with <code
              class="command">apt install <em
                class="replaceable">package</em></code> and <code
              class="command">apt remove <em
                class="replaceable">package</em></code>. In both cases, APT will automatically install the necessary dependencies or delete the packages which depend on the package that is being removed. The <code
              class="command">apt purge <em
                class="replaceable">package</em></code> command involves a complete uninstallation — the configuration files are also deleted.
			</div><a
            id="idm139627319322032"
            class="indexterm"></a><a
            id="idm139627319320912"
            class="indexterm"></a><a
            id="idm139627319319792"
            class="indexterm"></a><a
            id="idm139627319318672"
            class="indexterm"></a><a
            id="idm139627319317552"
            class="indexterm"></a><a
            id="idm139627319316432"
            class="indexterm"></a><a
            id="idm139627319315312"
            class="indexterm"></a><a
            id="idm139627319314192"
            class="indexterm"></a><a
            id="idm139627319313072"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Instalando la misma selección de paquetes varias veces</strong></p></div></div></div><div
              class="para">
				Puede ser útil instalar sistemáticamente la misma lista de paquetes en varios equipos. Esto puede realizarse fácilmente.
			</div><div
              class="para">
				Primero, obtenga la lista de paquetes en el equipo que servirá como «modelo» a copiar.
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --get-selections &gt;pkg-list</code></strong></pre><div
              class="para">
				The <code
                class="filename">pkg-list</code> file then contains the list of installed packages. Next, transfer the <code
                class="filename">pkg-list</code> file onto the computers you want to update and use the following commands:
			</div><pre
              class="screen">## Actualizar la base de datos de dpkg sobre paquetes conocidos
# <strong
                class="userinput"><code>avail=`mktemp`</code></strong>
# <strong
                class="userinput"><code>apt-cache dumpavail &gt; "$avail"</code></strong>
# <strong
                class="userinput"><code>dpkg --merge-avail "$avail"</code></strong>
# <strong
                class="userinput"><code>rm -f "$avail"</code></strong>
## Actualizar estado de selección de paquetes de dpkg
# <strong
                class="userinput"><code>dpkg --set-selections &lt; pkg-list</code></strong>
## Pedirle a apt-get que instale los paquetes seleccionados
# <strong
                class="userinput"><code>apt-get dselect-upgrade</code></strong></pre><div
              class="para">
				La primera orden graba la lista de paquetes disponibles en la base de datos de dpkg, después <code
                class="command">dpkg --set-selections</code> restaura el estado de los paquetes seleccionados que desea instalar y la ejecución de <code
                class="command">apt-get</code> implementa las operaciones requeridas. <code
                class="command">aptitude</code> no tiene esta orden.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Eliminando e instalando al mismo tiempo</strong></p></div></div></div><div
              class="para">
				It is possible to ask <code
                class="command">apt</code> (or <code
                class="command">apt-get</code>, or <code
                class="command">aptitude</code>) to install certain packages and remove others on the same command line by adding a suffix. With an <code
                class="command">apt install</code> command, add “<code
                class="literal">-</code>” to the names of the packages you wish to remove. With an <code
                class="command">apt remove</code> command, add “<code
                class="literal">+</code>” to the names of the packages you wish to install.
			</div><div
              class="para">
				El siguiente ejemplo muetra dos formas distintas de instalar <em
                class="replaceable">paquete1</em> y eliminar <em
                class="replaceable">paquete2</em>.
			</div><pre
              class="screen"># <strong
                class="userinput"><code>apt install <em
                    class="replaceable">package1</em> <em
                    class="replaceable">package2-</em></code></strong>
[...]
# <strong
                class="userinput"><code>apt remove <em
                    class="replaceable">package1+</em> <em
                    class="replaceable">package2</em></code></strong>
[...]
</pre><div
              class="para">
				De esta forma también puede excluir paquetes que se instalarían, por ejemplo debido a una recomendación (<code
                class="literal">Recommends</code>). Generalmente, el sistema de resolución de dependencias utilizará esa información como una indicación para encontrar soluciones alternativas.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt --reinstall</code> and <code
                        class="command">aptitude reinstall</code></strong></p></div></div></div><a
              id="idm139627319288960"
              class="indexterm"></a><div
              class="para">
				The system can sometimes be damaged after the removal or modification of files in a package. The easiest way to retrieve these files is to reinstall the affected package. Unfortunately, the packaging system finds that the latter is already installed and politely refuses to reinstall it; to avoid this, use the <code
                class="literal">--reinstall</code> option of the <code
                class="command">apt</code> and <code
                class="command">apt-get</code> commands. The following command reinstalls <span
                class="pkg pkg">postfix</span> even if it is already present:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt --reinstall install postfix</code></strong></pre><div
              class="para">
				La línea de órdenes para <code
                class="command">aptitude</code> es ligeramente diferente pero consigue el mismo resultado con <code
                class="command">aptitude reinstall postfix</code>.
			</div><div
              class="para">
				El problema no ocurre con <code
                class="command">dpkg</code> pero el administrador rara vez lo utiliza directamente.
			</div><div
              class="para">
				Be careful! Using <code
                class="command">apt --reinstall</code> to restore packages modified during an attack will certainly not recover the system as it was. <a
                class="xref"
                href="sect.dealing-with-compromised-machine.html">Sección 14.7, “Tratamiento de una máquina comprometida”</a> details the necessary steps to take with a compromised system.
			</div></div><div
            class="para">
				If the file <code
              class="filename">sources.list</code> mentions several distributions, it is possible to give the version of the package to install. A specific version number can be requested with <code
              class="command">apt install <em
                class="replaceable">package</em>=<em
                class="replaceable">version</em></code>, but indicating its distribution of origin (<span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span>) — with <code
              class="command">apt install <em
                class="replaceable">package</em>/<em
                class="replaceable">distribution</em></code> — is usually preferred. With this command, it is possible to go back to an older version of a package (if for instance you know that it works well), provided that it is still available in one of the sources referenced by the <code
              class="filename">sources.list</code> file. Otherwise the <code
              class="literal">snapshot.debian.org</code> archive can come to the rescue (see sidebar <a
              class="xref"
              href="apt.html#sidebar.snapshot.debian.org"><span
                class="emphasis"><em>YENDO MÁS ALLÁ</em></span> Versiones antiguas de paquetes: <code
                class="literal">snapshot.debian.org</code></a>).
			</div><div
            class="example"><a
              id="idm139627319272192"></a><p
              class="title"><strong>Ejemplo 6.3. Instalación de la versión en <span
                  class="distribution distribution">Unstable</span> de <span
                  class="pkg pkg">spamassassin</span></strong></p><div
              class="example-contents"><pre
                class="screen"><code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>apt install spamassassin/unstable</code></strong></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>YENDO MÁS ALLÁ</em></span> El caché de archivos <code
                        class="filename">.deb</code></strong></p></div></div></div><div
              class="para">
				APT keeps a copy of each downloaded <code
                class="filename">.deb</code> file in the directory <code
                class="filename">/var/cache/apt/archives/</code>. In case of frequent updates, this directory can quickly take a lot of disk space with several versions of each package; you should regularly sort through them. Two commands can be used: <code
                class="command">apt-get clean</code> entirely empties the directory; <code
                class="command">apt-get autoclean</code> only removes packages which can no longer be downloaded (because they have disappeared from the Debian mirror) and are therefore clearly useless (the configuration parameter <code
                class="literal">APT::Clean-Installed</code> can prevent the removal of <code
                class="filename">.deb</code> files that are currently installed). Note that <code
                class="command">apt</code> does not support those commands.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.apt-upgrade"></a>6.2.3. Actualización del sistema</h3></div></div></div><a
            id="idm139627319262048"
            class="indexterm"></a><a
            id="idm139627319260608"
            class="indexterm"></a><a
            id="idm139627319259488"
            class="indexterm"></a><a
            id="idm139627319258368"
            class="indexterm"></a><div
            class="para">
				Regular upgrades are recommended, because they include the latest security updates. To upgrade, use <code
              class="command">apt upgrade</code>, <code
              class="command">apt-get upgrade</code> or <code
              class="command">aptitude safe-upgrade</code> (of course after <code
              class="command">apt update</code>). This command looks for installed packages which can be upgraded without removing any packages. In other words, the goal is to ensure the least intrusive upgrade possible. <code
              class="command">apt-get</code> is slightly more demanding than <code
              class="command">aptitude</code> or <code
              class="command">apt</code> because it will refuse to install packages which were not installed beforehand.
			</div><div
            class="sidebar"><a
              id="sidebar.apt-pdiff"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Actualización incremental</strong></p></div></div></div><div
              class="para">
				As we explained earlier, the aim of the <code
                class="command">apt update</code> command is to download for each package source the corresponding <code
                class="filename">Packages</code> (or <code
                class="filename">Sources</code>) file. However, even after a <code
                class="command">bzip2</code> compression, these files can remain rather large (the <code
                class="filename">Packages.xz</code> for the <span
                class="foreignphrase"><em
                  class="foreignphrase">main</em></span> section of <span
                class="distribution distribution">Jessie</span> takes more than 6 MB). If you wish to upgrade regularly, these downloads can take up a lot of time.
			</div><div
              class="para">
				To speed up the process APT can download “diff” files containing the changes since the previous update, as opposed to the entire file. To achieve this, official Debian mirrors distribute different files which list the differences between one version of the <code
                class="filename">Packages</code> file and the following version. They are generated at each update of the archives and a history of one week is kept. Each of these “diff” files only takes a few dozen kilobytes for <span
                class="distribution distribution">Unstable</span>, so that the amount of data downloaded by a weekly <code
                class="command">apt update</code> is often divided by 10. For distributions like <span
                class="distribution distribution">Stable</span> and <span
                class="distribution distribution">Testing</span>, which change less, the gain is even more noticeable.
			</div><div
              class="para">
				Sin embargo, a veces puede estar interesado en descargar el archivo <code
                class="filename">Packages</code> completo, especialmente cuando la última actualización es muy antigua y cuando el mecanismo de diferencias incrementales no ayudaría demasiado. También puede ser interesante cuando el acceso de red es muy rápido pero el procesador en el equipo a actualizar es relativamente lento ya que el tiempo ahorrado en la descarga es más que el perdido cuando el equipo calcule la nueva versión de los archivos (comenzando con las versiones antiguas y aplicando las diferencias descargadas). Para hacer esto puede utilizar el parámetro de configuración <code
                class="literal">Acquire::Pdiffs</code> y configurarlo como <code
                class="literal">false</code>.
			</div></div><div
            class="para">
				<code
              class="command">apt</code> will generally select the most recent version number (except for packages from <span
              class="distribution distribution">Experimental</span> and <span
              class="distribution distribution">stable-backports</span>, which are ignored by default whatever their version number). If you specified <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span> in your <code
              class="filename">sources.list</code>, <code
              class="command">apt upgrade</code> will switch most of your <span
              class="distribution distribution">Stable</span> system to <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span>, which might not be what you intended.
			</div><div
            class="para">
				To tell <code
              class="command">apt</code> to use a specific distribution when searching for upgraded packages, you need to use the <code
              class="literal">-t</code> or <code
              class="literal">--target-release</code> option, followed by the name of the distribution you want (for example: <code
              class="command">apt -t stable upgrade</code>). To avoid specifying this option every time you use <code
              class="command">apt</code>, you can add <code
              class="literal">APT::Default-Release "stable";</code> in the file <code
              class="filename">/etc/apt/apt.conf.d/local</code>.
			</div><a
            id="idm139627324119232"
            class="indexterm"></a><a
            id="idm139627324118112"
            class="indexterm"></a><a
            id="idm139627324116992"
            class="indexterm"></a><a
            id="idm139627324115872"
            class="indexterm"></a><a
            id="idm139627324114752"
            class="indexterm"></a><div
            class="para">
				For more important upgrades, such as the change from one major Debian version to the next, you need to use <code
              class="command">apt full-upgrade</code>. With this instruction, <code
              class="command">apt</code> will complete the upgrade even if it has to remove some obsolete packages or install new dependencies. This is also the command used by users who work daily with the Debian <span
              class="distribution distribution">Unstable</span> release and follow its evolution day by day. It is so simple that it hardly needs explanation: APT's reputation is based on this great functionality.
			</div><div
            class="para">
				Unlike <code
              class="command">apt</code> and <code
              class="command">aptitude</code>, <code
              class="command">apt-get</code> doesn't know the <code
              class="command">full-upgrade</code> command. Instead, you should use <code
              class="command">apt-get dist-upgrade</code> (”distribution upgrade”), the historical and well-known command that <code
              class="command">apt</code> and <code
              class="command">aptitude</code> also accept for the convenience of users who got used to it.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.apt-config"></a>6.2.4. Opciones de configuración</h3></div></div></div><a
            id="idm139627324105920"
            class="indexterm"></a><a
            id="idm139627324104480"
            class="indexterm"></a><a
            id="idm139627324103360"
            class="indexterm"></a><div
            class="para">
				Además de los elementos de configuración ya mencionados es posible configurar ciertos aspectos de APT agregando directivas en un archivo del directorio <code
              class="filename">/etc/apt/apt.conf.d/</code>. Recuerde, por ejemplo, que APT puede indicarle a <code
              class="command">dpkg</code> que ignore errores de conflictos de archivos especificando <code
              class="literal">DPkg::Options { "--force-overwrite"; }</code>.
			</div><div
            class="para">
				Si sólo puede acceder a la web a través de un proxy, agregue una línea como <code
              class="literal">Acquire::http::proxy "http://<em
                class="replaceable">su-proxy</em>:3128"</code>. Para un proxy FTP, utilice <code
              class="literal">Acquire::ftp::proxy "ftp://<em
                class="replaceable">su-proxy</em>"</code>. Para descubrir más opciones de configuración, lea la página de manual <span
              class="citerefentry"><span
                class="refentrytitle">apt.conf</span>(5)</span> con la orden <code
              class="command">man apt.conf</code> (para detalles sobre las páginas de manual, revise la <a
              class="xref"
              href="solving-problems.html#sect.manual-pages">Sección 7.1.1, “Páginas de manual”</a>).
			</div><div
            class="sidebar"><a
              id="sidebar.directory.d"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> Directorios terminados con <code
                        class="filename">.d</code></strong></p></div></div></div><a
              id="idm139627324093904"
              class="indexterm"></a><div
              class="para">
				Cada vez más se utilizan directorios con el sufijo <code
                class="filename">.d</code>. Cada directorio representa un archivo de configuración repartido en múltiples archivos. En este sentido, todos los archivos en <code
                class="filename">/etc/apt/apt.conf.d/</code> son instrucciones para la configuración de APT. APT los incluye en orden alfabético para que los últimos puedan modificar un elemento de configuración definido en los primeros.
			</div><div
              class="para">
				Esta estructura le da cierta flexibilidad al administrador del equipo y a los desarrolladores de paquetes. De hecho, el administrador puede modificar fácilmente la configuración del software agregando un archivo prehecho en el directorio en cuestión sin tener que modificar un archivo existente. Los desarrolladores de paquetes utilizan el mismo enfoque cuando necesitan adaptar la configuración de otro software pare asegurar que pueda coexistir perfectamente con el suyo. La Normativa Debian prohíbe explícitamente modificar los archivos de configuración de otros paquetes — sólo los usuarios pueden hacerlo. Recuerde que durante la actualización de un paquete el usuario puede elegir la versión del archivo de configuración a mantener cuando se detectó una modificación. Cualquier modificación externa de un archivo dispararía dicho pedido, lo que molestaría al administrador que está seguro de no haber modificado nada.
			</div><div
              class="para">
				Without a <code
                class="filename">.d</code> directory, it is impossible for an external package to change the settings of a program without modifying its configuration file. Instead it must invite the user to do it themselves and lists the operations to be done in the file <code
                class="filename">/usr/share/doc/<em
                  class="replaceable">package</em>/README.Debian</code>.
			</div><div
              class="para">
				Dependiendo de la aplicación, el directorio <code
                class="filename">.d</code> puede ser utilizado directamente o administrado por un script externo que concatena todos los archivos para crear el archivo de configuración. Es importante ejecutar este script luego de cualquier cambio en ese directorio para que se tengan en cuenta las modificaciones más recientes. De la misma forma, es importante no trabajar directamente en el archivo de configuración creado automáticamente ya que se perdería todo en la siguiente ejecución del script. El método seleccionado (usar directamente el directorio <code
                class="filename">.d</code> o un archivo generado desde dicho directorio) está generalmente definido por limitaciones de implementación, pero en ambos casos las ganancias en cuanto a flexibilidad de la configuración más que compensan las pequeñas complicaciones que significan. El servidor de correo Exim 4 es un ejemplo del método en el que se genera el archivo: puede configurarse mediante varios archivos (<code
                class="filename">/etc/exim4/conf.d/*</code>) que son concatenados en <code
                class="filename">/var/lib/exim4/config.autogenerated</code> mediante la orden <code
                class="command">update-exim4.conf</code>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.apt.priorities"></a>6.2.5. Gestión de prioridades de los paquetes</h3></div></div></div><div
            class="para">
				Uno de los aspectos más importantes en la configuración de APT es la gestión de las prioridades asociadas con cada origen de paquetes. Por ejemplo, podría desear extender una distribución con uno o dos paquetes más recientes de <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span> o <span
              class="distribution distribution">Experimental</span>. Es posible asignar una prioridad a cada paquete disponible (el mismo paquete puede tener varias prioridades según su versión o la distribución que lo provee). Estas prioridades influenciarán el comportamiento de APT: para cada paquete, siempre seleccionará la versión con la prioridad más alta (excepto si esta versión es anterior a la instalada y si su prioridad es menor a 1000).
			</div><a
            id="idm139627324078912"
            class="indexterm"></a><a
            id="idm139627324076992"
            class="indexterm"></a><a
            id="idm139627324076032"
            class="indexterm"></a><a
            id="idm139627324074592"
            class="indexterm"></a><a
            id="idm139627324073152"
            class="indexterm"></a><a
            id="idm139627324071712"
            class="indexterm"></a><a
            id="idm139627324070592"
            class="indexterm"></a><div
            class="para">
				APT define varias prioridades predeterminadas. Cada versión instalada de un paquete tiene una prioridad de 100. Una versión no instalada tiene una prioridad predeterminada de 500, pero puede saltar a 990 si es parte de la distribución destino (definida con la opción de línea de órdenes <code
              class="literal">-t</code> o la directiva de configuración <code
              class="literal">APT::Default-Release</code>).
			</div><div
            class="para">
				Puede modificar las prioridades agregando elementos en el archivo <code
              class="filename">/etc/apt/preferences</code> con los nombres de los paquetes afectados, sus versiones, sus orígenes y sus nuevas prioridades.
			</div><div
            class="para">
				APT nunca instalará una versión anterior de un paquete (esto es, un paquete cuyo número de versión sea menor al que está instalado actualmente) excepto si su prioridad es mayor a 1000. APT siempre instalará el paquete con la mayor prioridad que cumpla esta restricción. Si dos paquetes tienen la misma prioridad, APT instalará la más reciente (aquella cuya versión sea mayor). Si dos paquetes de la misma versión tienen la misma prioridad pero tienen diferente contenido, APT instalará la versión que no está instalada (se creó esta regla para cubrir los casos de la actualización de un paquete sin aumentar el número de revisión, que es generalmente necesario).
			</div><div
            class="para">
				En términos más concretos, un paquete con prioridad menor a 0 nunca será instalado. Un paquete con una prioridad entre 0 y 100 sólo será instalado si no hay otra versión ya instalada del paquete. Con una prioridad entre 100 y 500, el paquete sólo será instalado si no hay otra versión más reciente instalada o disponible en otra distribución. Un paquete con prioridad entre 501 y 990 será instalado sólo si no hay una versión más nueva instalada o disponible en la distribución de destino. Con una prioridad entre 990 y 1000, el paquete será instalado a menos que la versión instalada sea mayor. Una prioridad mayor a 1000 siempre llevará a la instalación del paquete aún si ésto significa que APT instalará una versión anterior.
			</div><div
            class="para">
				When APT checks <code
              class="filename">/etc/apt/preferences</code>, it first takes into account the most specific entries (often those specifying the concerned package), then the more generic ones (including for example all the packages of a distribution). If several generic entries exist, the first match is used. The available selection criteria include the package's name and the source providing it. Every package source is identified by the information contained in a <code
              class="filename">Release</code> file that APT downloads together with the <code
              class="filename">Packages</code> files. It specifies the origin (usually “Debian” for the packages of official mirrors, but it can also be a person's or an organization's name for third-party repositories). It also gives the name of the distribution (usually <span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span> or <span
              class="distribution distribution">Experimental</span> for the standard distributions provided by Debian) together with its version (for example 8 for Debian <span
              class="distribution distribution">Jessie</span>). Let's have a look at its syntax through some realistic case studies of this mechanism.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CASO ESPECÍFICO</em></span> La prioridad de <span
                        class="distribution distribution">Experimental</span></strong></p></div></div></div><a
              id="idm139627324055968"
              class="indexterm"></a><div
              class="para">
				Si agregó <span
                class="distribution distribution">Experimental</span> en su archivo <code
                class="filename">sources.list</code>, los paquetes correspondientes casi nunca serán instalados porque su prioridad APT predeterminada es 1. Este es, por supuesto, un caso específico diseñado para evitar que los usuarios instalen paquetes de <span
                class="distribution distribution">Experimental</span> por error. Los paquetes sólo pueden instalarse ejecutando <code
                class="command">aptitude install <em
                  class="replaceable">paquete</em>/experimental</code> — solo los usuarios que ingresen esta orden saben los riesgos que están tomando. Es posible (aunque <span
                class="emphasis"><em>no</em></span> recomendable) tratar los paquetes de <span
                class="distribution distribution">Experimental</span> como aquellos de otra distribución otorgándoles una prioridad de 500. Esto se logra con una entrada específica en <code
                class="filename">/etc/apt/preferences</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">Package: *
Pin: release a=experimental
Pin-Priority: 500
</pre></div></div><div
            class="para">
				Supongamos que sólo desea utilizar paquetes de la versión estable de Debian. Aquellos provistos en otras versiones no serían instalados a menos que sean pedidos explícitamente. Puede escribir las siguientes entradas en el archivo <code
              class="filename">/etc/apt/preferences</code>:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: *
Pin: release a=stable
Pin-Priority: 900

Package: *
Pin: release o=Debian
Pin-Priority: -10
</pre></div><div
            class="para">
				<code
              class="literal">a=stable</code> define el nombre de la distribución elegida. <code
              class="literal">o=Debian</code> limita el alcance a los paquetes cuyo origen es «Debian».
			</div><div
            class="para">
				Let's now assume that you have a server with several local programs depending on the version 5.14 of Perl and that you want to ensure that upgrades will not install another version of it. You could use this entry:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: perl
Pin: version 5.14*
Pin-Priority: 1001
</pre></div><div
            class="para">
				La documentación de referencia para este archivo de configuración está disponible en la página de manual <span
              class="citerefentry"><span
                class="refentrytitle">apt_preferences</span>(5)</span> que puede ver con <code
              class="command">man apt_preferences</code>.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Comentarios en <code
                        class="filename">/etc/apt/preferences</code></strong></p></div></div></div><a
              id="idm139627324038832"
              class="indexterm"></a><a
              id="idm139627324037712"
              class="indexterm"></a><a
              id="idm139627324036592"
              class="indexterm"></a><div
              class="para">
				No existe una sintaxis oficial para agregar comentarions en el archivo <code
                class="filename">/etc/apt/preferences</code>, pero se pueden proveer algunas descripciones textuales agregando uno o más campos «<code
                class="literal">Explanation</code>» al principio de cada entrada:
			</div><div
              class="informalexample"><pre
                class="programlisting">Explanation: El paquete xserver-xorg-video-intel provisto
Explanation: en experimental puede usarse de forma segura
Package: xserver-xorg-video-intel
Pin: release a=experimental
Pin-Priority: 500
</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.apt-mix-distros"></a>6.2.6. Trabajo con varias distribuciones</h3></div></div></div><div
            class="para">
				<code
              class="command">apt</code> being such a marvelous tool, it is tempting to pick packages coming from other distributions. For example, after having installed a <span
              class="distribution distribution">Stable</span> system, you might want to try out a software package available in <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span> without diverging too much from the system's initial state.
			</div><div
            class="para">
				Even if you will occasionally encounter problems while mixing packages from different distributions, <code
              class="command">apt</code> manages such coexistence very well and limits risks very effectively. The best way to proceed is to list all distributions used in <code
              class="filename">/etc/apt/sources.list</code> (some people always put the three distributions, but remember that <span
              class="distribution distribution">Unstable</span> is reserved for experienced users) and to define your reference distribution with the <code
              class="literal">APT::Default-Release</code> parameter (see <a
              class="xref"
              href="sect.apt-get.html#sect.apt-upgrade">Sección 6.2.3, “Actualización del sistema”</a>).
			</div><div
            class="para">
				Let's suppose that <span
              class="distribution distribution">Stable</span> is your reference distribution but that <span
              class="distribution distribution">Testing</span> and <span
              class="distribution distribution">Unstable</span> are also listed in your <code
              class="filename">sources.list</code> file. In this case, you can use <code
              class="command">apt install <em
                class="replaceable">package</em>/testing</code> to install a package from <span
              class="distribution distribution">Testing</span>. If the installation fails due to some unsatisfiable dependencies, let it solve those dependencies within <span
              class="distribution distribution">Testing</span> by adding the <code
              class="literal">-t testing</code> parameter. The same obviously applies to <span
              class="distribution distribution">Unstable</span>.
			</div><div
            class="para">
				In this situation, upgrades (<code
              class="command">upgrade</code> and <code
              class="command">full-upgrade</code>) are done within <span
              class="distribution distribution">Stable</span> except for packages already upgraded to another distribution: those will follow updates available in the other distributions. We will explain this behavior with the help of the default priorities set by APT below. Do not hesitate to use <code
              class="command">apt-cache policy</code> (see sidebar) to verify the given priorities.
			</div><div
            class="para">
				Todo gira alrededor del hecho de que APT considera sólo paquetes con una versión mayor o igual que la instalada (suponiendo que <code
              class="filename">/etc/apt/preferences</code> no ha sido usado para forzar prioridades superiores a 1000 para algunos paquetes).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> <code
                        class="command">apt-cache policy</code></strong></p></div></div></div><div
              class="para">
				Para obtener un mejor entendimiento del mecanismo de prioridades, no dude en ejecutar <code
                class="command">apt-cache policy</code> para mostrar la prioridad predeterminada asociada a cada origen de paquetes. También puede utilizar <code
                class="command">apt-cache policy <em
                  class="replaceable">paquete</em></code> para mostrar las prioridades de todas las versiones disponibles de un paquete dado.
			</div></div><div
            class="para">
				Asumamos que instaló la versión 1 de un primer paquete de <span
              class="distribution distribution">Stable</span> y que las versiones 2 y 3 están disponibles en <span
              class="distribution distribution">Testing</span> y <span
              class="distribution distribution">Unstable</span> respectivamente. La versión instalada tiene una prioridad de 100, pero la versión disponible en <span
              class="distribution distribution">Stable</span> (la misma versión) tiene una prioridad de 990 (porque es parte de la versión de destino). Los paquetes en <span
              class="distribution distribution">Testing</span> y <span
              class="distribution distribution">Unstable</span> tienen una prioridad de 500 (la prioridad predeterminada para una versión no instalada). El ganador es, por lo tanto, la versión 1 con una prioridad de 990. El paquete «se mantiene en <span
              class="distribution distribution">Stable</span>».
			</div><div
            class="para">
				Tomemos como ejemplo otro paquete cuya versión 2 fue instalada de <span
              class="distribution distribution">Testing</span>. La versión 1 está disponible en <span
              class="distribution distribution">Stable</span> y la versión 3 en <span
              class="distribution distribution">Unstable</span>. La versión 1 (de prioridad 990 — por lo tanto menor a 1000) es descartada porque es menor que la versión instalada. Esto deja sólo las versiones 2 y 3, ambas de prioridad 500. Frente a esta alternativa, APT selecciona la versión más nueva: la de <span
              class="distribution distribution">Unstable</span>. Si no desea que un paquete de <span
              class="distribution distribution">Testing</span> actualice su versión a la de <span
              class="distribution distribution">Unstable</span>, debe asignar una prioridad menor a 500 (490 por ejemplo) a los paquetes que provengan de <span
              class="distribution distribution">Unstable</span>. Puede modificar <code
              class="filename">/etc/apt/preferences</code> de la siguiente forma:
			</div><pre
            class="programlisting">Package: *
Pin: release a=unstable
Pin-Priority: 490
</pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.automatic-tracking"></a>6.2.7. Seguimiento de paquetes instalados automáticamente</h3></div></div></div><div
            class="para">
				One of the essential functionalities of <code
              class="command">apt</code> is the tracking of packages installed only through dependencies. These packages are called “automatic”, and often include libraries for instance.
			</div><div
            class="para">
				With this information, when packages are removed, the package managers can compute a list of automatic packages that are no longer needed (because there is no “manually installed” packages depending on them). <code
              class="command">apt-get autoremove</code> will get rid of those packages. <code
              class="command">aptitude</code> and <code
              class="command">apt</code> do not have this command: the former because it removes them automatically as soon as they are identified, and the latter probably because the user should not have to manually run such a command. In all cases, the tools display a clear message listing the affected packages.
			</div><a
            id="idm139627323991840"
            class="indexterm"></a><a
            id="idm139627323990720"
            class="indexterm"></a><a
            id="idm139627323989600"
            class="indexterm"></a><a
            id="idm139627323988480"
            class="indexterm"></a><div
            class="para">
				Es buen hábito marcar como automático cualquier paquete que no necesite directamente para que sea eliminado automáticamente cuando ya no sea necesario. <code
              class="command">apt-mark auto <em
                class="replaceable">paquete</em></code> marcará el paquete dado como automático mientras que <code
              class="command">apt-mark manual <em
                class="replaceable">paquete</em></code> realiza lo opuesto. <code
              class="command">aptitude markauto</code> y <code
              class="command">aptitude unmarkauto</code> funcionan de la misma forma, pero ofrecen más funcionalidad para marcar varios paquetes simultáneamente (revise la <a
              class="xref"
              href="sect.apt-frontends.html#sect.aptitude">Sección 6.4.1, “<code
                class="command">aptitude</code>”</a>). La interfaz interactiva para la consola de <code
              class="command">aptitude</code> también facilita el revisar la «marca automática» en muchos paquetes.
			</div><a
            id="idm139627323982992"
            class="indexterm"></a><div
            class="para">
				People might want to know why an automatically installed package is present on the system. To get this information from the command line, you can use <code
              class="command">aptitude why <em
                class="replaceable">package</em></code> (<code
              class="command">apt</code> and <code
              class="command">apt-get</code> have no similar feature):
			</div><pre
            class="screen">$ <strong
              class="userinput"><code>aptitude why python-debian</code></strong>
i   aptitude         Recommends apt-xapian-index         
i A apt-xapian-index Depends    python-debian (&gt;= 0.1.15)
</pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVA</em></span> <code
                        class="command">deborphan</code> y <code
                        class="command">debfoster</code></strong></p></div></div></div><a
              id="idm139627323976576"
              class="indexterm"></a><a
              id="idm139627323975456"
              class="indexterm"></a><div
              class="para">
				In days where <code
                class="command">apt</code>, <code
                class="command">apt-get</code> and <code
                class="command">aptitude</code> were not able to track automatic packages, there were two utilities producing lists of unnecessary packages: <code
                class="command">deborphan</code> and <code
                class="command">debfoster</code>.
			</div><div
              class="para">
				<code
                class="command">deborphan</code> is the most rudimentary of both. It simply scans the <code
                class="literal">libs</code> and <code
                class="literal">oldlibs</code> sections (in the absence of supplementary instructions) looking for the packages that are currently installed and that no other package depends on. The resulting list can then serve as a basis to remove unneeded packages.
			</div><div
              class="para">
				<code
                class="command">debfoster</code> tiene un enfoque más elaborado, muy similar al de APT: mantiene una lista de paquetes que fueron instalados explícitamente y recuerda qué paquetes son realmente necesarios entre cada invocación. Si aparecen nuevos paquetes en el sistema que <code
                class="command">debfoster</code> no reconoce como paquetes requeridos serán mostrados en pantalla junto a una lista de sus dependencias. El programa luego ofrece la opción de eliminar el paquete (posiblemente junto a los que dependen de él), marcarlo como requerido explícitamente o ignorarlo temporalmente.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Anterior</strong>Capítulo 6. Mantenimiento y actualizaciones: las ...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Siguiente</strong>6.3. La orden apt-cache</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.apt-get.html">ar-MA</a></li><li><a
              href="../da-DK/sect.apt-get.html">da-DK</a></li><li><a
              href="../de-DE/sect.apt-get.html">de-DE</a></li><li><a
              href="../el-GR/sect.apt-get.html">el-GR</a></li><li><a
              href="../en-US/sect.apt-get.html">en-US</a></li><li><a
              href="../es-ES/sect.apt-get.html">es-ES</a></li><li><a
              href="../fa-IR/sect.apt-get.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.apt-get.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.apt-get.html">hr-HR</a></li><li><a
              href="../id-ID/sect.apt-get.html">id-ID</a></li><li><a
              href="../it-IT/sect.apt-get.html">it-IT</a></li><li><a
              href="../ja-JP/sect.apt-get.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.apt-get.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.apt-get.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.apt-get.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.apt-get.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.apt-get.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.apt-get.html">zh-CN</a></li></ul></div></body></html>
