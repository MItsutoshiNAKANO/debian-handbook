<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. Metainformación de un paquete</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Paquete binario, Paquete fuente, dpkg, dependencias, conflicto" /><link
        rel="home"
        href="index.html"
        title="El libro del administrador de Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Capítulo 5. Sistema de paquetes: herramientas y principios fundamentales" /><link
        rel="prev"
        href="packaging-system.html"
        title="Capítulo 5. Sistema de paquetes: herramientas y principios fundamentales" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. Estructura de un paquete fuente" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/es-ES/sect.package-meta-information.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Anterior</strong></a></li><li
          class="home">El libro del administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.package-meta-information"></a>5.2. Metainformación de un paquete</h2></div></div></div><a
          id="idm140546708748624"
          class="indexterm"></a><a
          id="idm140546708747696"
          class="indexterm"></a><div
          class="para">
			The Debian package is not only an archive of files intended for installation. It is part of a larger whole, and it describes its relationship with other Debian packages (dependencies, conflicts, suggestions). It also provides scripts that enable the execution of commands at different stages in the package's lifecycle (installation, removal, upgrades). These data are used by the package management tools but are not part of the packaged software; they are, within the package, what is called its “meta-information” (information about other information).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.control"></a>5.2.1. Descripción: el archivo <code
                    class="filename">control</code></h3></div></div></div><a
            id="idm140546691773744"
            class="indexterm"></a><a
            id="idm140546691772816"
            class="indexterm"></a><a
            id="idm140546691771376"
            class="indexterm"></a><div
            class="para">
				This file uses a structure similar to email headers (as defined by RFC 2822). For example, for <span
              class="pkg pkg">apt</span>, the <code
              class="filename">control</code> file looks like the following:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.0.9.6
Installed-Size: 3788
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Depends: libapt-pkg4.12 (&gt;= 1.0.9.6), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:4.1.1), libstdc++6 (&gt;= 4.9), debian-archive-keyring, gnupg
Suggests: aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), apt-doc, python-apt
Conflicts: python-apt (&lt;&lt; 0.7.93.2~)
Breaks: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 role::shared-lib, scope::application, scope::utility, sound::player,
 suite::debian, use::downloading, use::organizing, use::searching,
 works-with::audio, works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.0.9.6_amd64.deb
Size: 1107560
MD5sum: a325ccb14e69fef2c50da54e035a4df4
SHA1: 635d09fcb600ec12810e3136d51e696bcfa636a6
SHA256: 371a559ce741394b59dbc6460470a9399be5245356a9183bbeea0f89ecaabb03</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> RFC — estándares de internet</strong></p></div></div></div><a
              id="idm140546691763856"
              class="indexterm"></a><a
              id="idm140546691762896"
              class="indexterm"></a><div
              class="para">
				RFC son las siglas de «pedido de comentarios» («Request For Comments»). Un RFC es generalmente un documento técnico que describe lo que se convertirá en un estándar de internet. Antes de convertirse en estándar y congelarse, éstos estándares son enviados para revisión pública (de ahí su nombre). La IETF («Internet Engineering Task Force»: grupo de trabajo de ingeniería de internet) decide sobre la evolución del estado de estos documentos (estándares propuestos, borradores de estándar o estándar).
			</div><div
              class="para">
				RFC 2026 define el proceso de estadarización de protocolos de internet. <div
                class="url">→ <a
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546691759664"></a>5.2.1.1. Dependencias: el campo <code
                      class="literal">Depends</code></h4></div></div></div><a
              id="idm140546709015648"
              class="indexterm"></a><a
              id="idm140546709014688"
              class="indexterm"></a><a
              id="idm140546709013408"
              class="indexterm"></a><div
              class="para">
					The dependencies are defined in the <code
                class="literal">Depends</code> field in the package header. This is a list of conditions to be met for the package to work correctly — this information is used by tools such as <code
                class="command">apt</code> in order to install the required libraries, in appropriate versions fulfilling the dependencies of the package to be installed. For each dependency, it is possible to restrict the range of versions that meet that condition. In other words, it is possible to express the fact that we need the package <span
                class="pkg pkg">libc6</span> in a version equal to or greater than “2.15” (written “<code
                class="command">libc6 (&gt;= 2.15)</code>”). Version comparison operators are as follows:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: menor que;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: menor o igual que;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: igual a (note que «<code
                      class="literal">2.6.1</code>» no es igual a «<code
                      class="literal">2.6.1-1</code>»);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: mayor o igual que;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: mayor que.
						</div></li></ul></div><div
              class="para">
					En una lista de condiciones a cumplir, la coma sirve como separador. Debe interpretársela como un «y» lógico. En las condiciones una barra vertical («|») expresa un «o» lógico (es un «o» inclusivo, no uno exclusivo que significa «o uno o el otro»). Tiene más prioridad que «y» y puede ser utilizado tantas veces como sea necesario. Por lo tanto, la dependencia «(A o B) y C» se escribe <code
                class="command">A | B, C</code>. Por otro lado, la expresión «A o (B y C)» debe escribirse «(A o B) y (A o C)» ya que el campo <code
                class="literal">Depends</code> no permite paréntesis que cambien el orden de las prioridades entre los operadores lógicos «o» e «y». Por lo tanto, se lo escribiría <code
                class="command">A | B, A | C</code>. <div
                class="url">→ <a
                  href="http://www.debian.org/doc/debian-policy/ch-relationships.html">http://www.debian.org/doc/debian-policy/ch-relationships.html</a></div>
				</div><a
              id="idm140546708997232"
              class="indexterm"></a><div
              class="para">
					El sistema de dependencias es un buen mecanismo para garantizar el funcionamiento de un programa, pero tiene otro uso con los «metapaquetes». Éstos son paquetes vacíos que sólo describen dependencias. Facilitan la instalación de un grupo consistente de programas preseleccionados por el desarrollador del metapaquete; como tal <code
                class="command">apt-get install <em
                  class="replaceable">metapaquete</em></code> instalará automáticamente todos estos programas utilizando las dependencias del metapaquete. Los paquetes <span
                class="pkg pkg">gnome</span>, <span
                class="pkg pkg">kde-full</span> y <span
                class="pkg pkg">linux-image-amd64</span>, por ejemplo, son metapaquetes.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NORMA DEBIAN</em></span> <code
                          class="literal">Pre-Depends</code>, un <code
                          class="literal">Depends</code> más exigentes</strong></p></div></div></div><a
                id="idm140546708990512"
                class="indexterm"></a><a
                id="idm140546708989232"
                class="indexterm"></a><div
                class="para">
					Las «predependencias», listadas en el campo «<code
                  class="literal">Pre-Depends</code>» de las cabeceras de un paquete, completan las dependencias normales; la sintaxis es idéntica. Una dependencia normal indica que el paquete en cuestión debe ser desempaquetado y configurado antes de la configuración del paquete que declara la dependencia. Una predependencia estipula que el paquete en cuestión debe ser desempaquetado y configurado antes de la ejecución del script de preinstalación del paquete que declara la predependencia, es decir antes de su instalación.
				</div><div
                class="para">
					Una predependencia es muy exigente para <code
                  class="command">apt</code> porque agrega una restricción estricta en el orden de instalación de los paquetes. Por lo tanto se intenta evitar predependencias a menos que sea absolutamente necesario. Es recomendable aún consultar a otros desarrolladores en <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> antes de agregar una predependencia. Generalmente es posible encontrar otra solución para evitarlo.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NORMA DEBIAN</em></span> Campos <code
                          class="literal">Recommends</code>, <code
                          class="literal">Suggests</code> y <code
                          class="literal">Enhances</code></strong></p></div></div></div><a
                id="idm140546708982608"
                class="indexterm"></a><a
                id="idm140546708981328"
                class="indexterm"></a><div
                class="para">
					Los campos <code
                  class="literal">Recommends</code> y <code
                  class="literal">Suggests</code> describen dependencias que no son obligatorias. Las dependencias «recomendadas», las más importantes, mejoran considerablemente la funcionalidad ofrecida por el paquete pero no son indispensables para su funcionamiento. Las dependencias «sugeridas», de importancia secundaria, indica que ciertos paquetes complementarían y aumentarían su utilidad pero es perfectamente razonable instalar uno sin los otros.
				</div><div
                class="para">
					Siempre debería instalar los paquetes «recomendados» a menos que sepa exactamente que no los necesita. Por el contrario, no es necesario instalar paquetes «sugeridos» a menos que sepa porqué los necesita.
				</div><a
                id="idm140546708977520"
                class="indexterm"></a><div
                class="para">
					El campo <code
                  class="literal">Enhances</code> también describe una sugerencia pero en un contexto diferente. Está ubicado en el paquete sugerido, no en el paquete que se beneficia de la sugerencia. Por lo tanto, todos los agregados, plugins y otras extensiones de un programa pueden aparecer en la lista de sugerencias relacionadas al software. Si bien existe desde hace varios años, este último campo es generalmente ignorado por programas como <code
                  class="command">apt-get</code> o <code
                  class="command">synaptic</code>. Su propósito es que una sugerencia en el campo <code
                  class="literal">Enhances</code> aparezca ante el usuario además de las sugerencias tradicionales — que se encuentran en el campo <code
                  class="literal">Suggests</code>.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708972720"></a>5.2.1.2. Conflictos: el campo <code
                      class="literal">Conflicts</code></h4></div></div></div><a
              id="idm140546708971600"
              class="indexterm"></a><a
              id="idm140546708970640"
              class="indexterm"></a><a
              id="idm140546708969360"
              class="indexterm"></a><div
              class="para">
					El campo <code
                class="literal">Conflicts</code> indica que un paquete no puede instalarse simultáneamente con otro. La razón más común es que ambos paquetes contienen un archivo con el mismo nombre, proveen el mismo servicio en el mismo puerto TCP o estorban el funcionamiento del otro.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> se negará a instalar un paquete si genera un conflicto con un paquete ya instalado, excepto si el nuevo paquete especifica que «reemplazará» al paquete instalado en cuyo caso <code
                class="command">dpkg</code> elegirá reemplazar el paquete existente con el nuevo. <code
                class="command">apt-get</code> siempre seguirá sus instrucciones: si desea instalar un nuevo paquete ofrecerá automáticamente desinstalar el paquete que genera problemas.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708964304"></a>5.2.1.3. Incompatibilidades: el campo <code
                      class="literal">Breaks</code></h4></div></div></div><a
              id="idm140546708963216"
              class="indexterm"></a><a
              id="idm140546708962256"
              class="indexterm"></a><a
              id="idm140546708960976"
              class="indexterm"></a><div
              class="para">
					El campo <code
                class="literal">Breaks</code> tiene un efecto similar al del campo <code
                class="literal">Conflicts</code> pero con un significado especial. Indica que la instalación de un paquete «romperá» otro paquete (o versiones particulares del mismo). En general, esta incompatibilidad entre dos paquetes es temporal y la relación <code
                class="literal">Breaks</code> se refiere específicamente a las versiones incompatibles.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> se negará a instalar un paquete que rompe un paquete ya instalado y <code
                class="command">apt-get</code> intentará resolver el problema actualizando a una nueva versión el paquete que se rompería (que se asume estaría arreglado y, por lo tanto, sería compatible nuevamente).
				</div><div
              class="para">
					Este tipo de situaciones pueden ocurrir en casos de actualizaciones que no sean compatibles con versiones anteriores: este es el caso si una nueva versión ya no funciona con la versión anterior y causa un mal funcionamiento en otros programas si no se toman medidas especiales. El campo <code
                class="literal">Breaks</code> previene que el usuario se tope con estos problemas.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708954304"></a>5.2.1.4. Elementos provistos: el campo <code
                      class="literal">Provides</code></h4></div></div></div><a
              id="idm140546708953216"
              class="indexterm"></a><div
              class="para">
					Este campo introduce el concepto interesante de un «paquete virtual». Tiene muchos roles pero hay dos particularmente importantes. El primero consiste en utilizar un paquete virtual para asociar un servicio genérico con él (el paquete «provee» el servicio). El segundo indica que un paquete reemplaza completamente a otro y, para esos propósitos, también puede satisfacer las dependencias que otros satisfacen. Es posible, entonces, crear un paquete substituto sin tener que utilizar el mismo nombre de paquete.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARIO</em></span> Metapaquete y paquete virtual</strong></p></div></div></div><a
                id="idm140546708949856"
                class="indexterm"></a><a
                id="idm140546708948896"
                class="indexterm"></a><a
                id="idm140546708947456"
                class="indexterm"></a><div
                class="para">
					Es esencial distinguir los metapaquetes de los paquetes virtuales. Los primeros son paquetes reales (incluyendo archivos <code
                  class="filename">.deb</code>) cuyo único propósito es expresar dependencias.
				</div><div
                class="para">
					Los paquetes virtuales, por el otro lado, no existen físicamente; sólo son un modo de identificar paquetes reales basados en criterios lógicos y comunes (servicios provistos, compatibilidades con un programa estándar o un paquete preexistentes, etc.).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140546708944560"></a>5.2.1.4.1. Proveyendo un «servicio»</h5></div></div></div><div
                class="para">
						Let us discuss the first case in greater detail with an example: all mail servers, such as <span
                  class="pkg pkg">postfix</span> or <span
                  class="pkg pkg">sendmail</span> are said to “provide” the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. Thus, any package that needs this service to be functional (e.g. a mailing list manager, such as <span
                  class="pkg pkg">smartlist</span> or <span
                  class="pkg pkg">sympa</span>) simply states in its dependencies that it requires a <span
                  class="pkg pkg">mail-transport-agent</span> instead of specifying a large yet incomplete list of possible solutions (e.g. <code
                  class="command">postfix | sendmail | exim4 | …</code>). Furthermore, it is useless to install two mail servers on the same machine, which is why each of these packages declares a conflict with the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. A conflict between a package and itself is ignored by the system, but this technique will prohibit the installation of two mail servers side by side.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>NORMA DEBIAN</em></span> Lista de paquetes virtuales</strong></p></div></div></div><a
                  id="idm140546708936816"
                  class="indexterm"></a><div
                  class="para">
						Para que un paquete virtual sea útil, todos deben estar de acuerdo en su nombre. Es porque eso que están estandarizados en la Normativa Debian. Esta lista incluye, entre otros, <span
                    class="pkg pkg">mail-transport-agent</span> para servidores de correo, <span
                    class="pkg pkg">c-compiler</span> para compiladores del lenguaje de programación C, <span
                    class="pkg pkg">www-browser</span> para navegadores web, <span
                    class="pkg pkg">httpd</span> para servidores web, <span
                    class="pkg pkg">ftp-server</span> para servidores FTP, <span
                    class="pkg pkg">x-terminal-emulator</span> para emuladores de terminal en modo gráfico (<code
                    class="command">xterm</code>) y <span
                    class="pkg pkg">x-window-manager</span> para gestores de ventanas.
					</div><div
                  class="para">
						Puede encontrar la lista completa en la web. <div
                    class="url">→ <a
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140546708928224"></a>5.2.1.4.2. Intercambio con otro paquete</h5></div></div></div><div
                class="para">
						The <code
                  class="literal">Provides</code> field is also interesting when the content of a package is included in a larger package. For example, the <span
                  class="pkg pkg">libdigest-md5-perl</span> Perl module was an optional module in Perl 5.6, and has been integrated as standard in Perl 5.8 (and later versions, such as 5.20 present in <span
                  class="distribution distribution">Jessie</span>). As such, the package <span
                  class="pkg pkg">perl</span> has since version 5.8 declared <code
                  class="literal">Provides: libdigest-md5-perl</code> so that the dependencies on this package are met if the user has Perl 5.8 (or newer). The <span
                  class="pkg pkg">libdigest-md5-perl</span> package itself has eventually been deleted, since it no longer had any purpose when old Perl versions were removed.
					</div><div
                class="figure"><a
                  id="idm140546708923120"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="Utilización del campo Provides para no romper dependencias" /></div></div><p
                  class="title"><strong>Figura 5.1. Utilización del campo <code
                      class="literal">Provides</code> para no romper dependencias</strong></p></div><div
                class="para">
						Esta funcionalidad es muy útil ya que nunca es posible anticipar los caprichos del desarrollo y es necesario que sea posible adaptarse a cambios de nombre y otros reemplazos automáticos de software obsoleto.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> Perl, un lenguaje de programación</strong></p></div></div></div><a
                  id="idm140546708918112"
                  class="indexterm"></a><a
                  id="idm140546708917152"
                  class="indexterm"></a><div
                  class="para">
						Perl (lenguaje práctico de extración y reportes — «Practical Extraction and Report Language») es un lenguaje de programación muy popular. Tiene muchos módulos listos para utilizar que cubren un vasto espectro de aplicaciones y que son distribuidos por los servidores CPAN (red exhaustiva de compendios Perl — «Comprehensive Perl Archive Network»), una amplia red de paquetes Perl. <div
                    class="url">→ <a
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    class="url">→ <a
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						Dado que es un lenguaje interpretado, un programa escrito en Perl no requiere compilación antes de su ejecución. Por esto se los llama «scripts Perl».
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140546708912976"></a>5.2.1.4.3. Past Limitations</h5></div></div></div><div
                class="para">
						Virtual packages used to suffer from some limitations, the most significant of which was the absence of a version number. To return to the previous example, a dependency such as <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code>, despite the presence of Perl 5.10, would never be considered as satisfied by the packaging system — while in fact it most likely is satisfied. Unaware of this, the package system chose the least risky option, assuming that the versions do not match.
					</div><div
                class="para">
						This limitation has been lifted in <span
                  class="pkg pkg">dpkg</span> 1.17.11, and is no longer relevant in Jessie.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708909424"></a>5.2.1.5. Reemplazo de archivos: el campo <code
                      class="literal">Replaces</code></h4></div></div></div><a
              id="idm140546708908336"
              class="indexterm"></a><a
              id="idm140546708907376"
              class="indexterm"></a><a
              id="idm140546708906096"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Replaces</code> field indicates that the package contains files that are also present in another package, but that the package is legitimately entitled to replace them. Without this specification, <code
                class="command">dpkg</code> fails, stating that it can not overwrite the files of another package (technically, it is possible to force it to do so with the <code
                class="literal">--force-overwrite</code> option, but that's not considered standard operation). This allows identification of potential problems and requires the maintainer to study the matter prior to choosing whether to add such a field.
				</div><div
              class="para">
					El uso de este campo está justificado cuando cambian los nombres de los paquetes o cuando un paquete está incluido en otro. Esto sucede cuando el desarrollador decide distribuir los archivos de otra forma entre los varios paquetes binarios producidos del mismo paquete fuente: un archivo reemplazado no le corresponde al paquete antiguo, sólo al nuevo.
				</div><div
              class="para">
					Si todos los archivos de un paquete instalado fueron reemplazados, se considera que se eliminó el paquete. Finalmente, este campo incita que <code
                class="command">dpkg</code> elimie los paquetes reemplazados en casos de conflictos.
				</div><div
              class="sidebar"><a
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>YENDO MÁS ALLÁ</em></span> El campo <code
                          class="literal">Tag</code></strong></p></div></div></div><div
                class="para">
					En el ejemplo anterior de <span
                  class="pkg pkg">apt</span> podemos ver la presencia de un campo que no hemos descripto todavía, el campo <code
                  class="literal">Tag</code>. Este campo no describe la relación entre paquetes sino que es una forma simple de categorizar un paquete en una taxonomía temática. Esta clasificación de paquetes según varios criterios (tipos de interfaz, lenguaje de programación, dominio de la aplicación, etc.) ha estado disponible en Debian por mucho tiempo. Sin embargo, no todos los paquetes tienen etiquetas («tag») precisas y no está integrado aún en todas las herramientas de Debian; <code
                  class="command">aptitude</code> muestra estas etiquetas y permite utilizarlas como criterio de búsqueda. Para aquellos que evitan los criterios de búsqueda de <code
                  class="command">aptitude</code>, el siguiente sitio web le permite navegar por la base de datos de etiquetas: <div
                  class="url">→ <a
                    href="http://debtags.alioth.debian.org/">http://debtags.alioth.debian.org/</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140546708894400"></a>5.2.2. Scripts de configuración</h3></div></div></div><a
            id="idm140546708893632"
            class="indexterm"></a><a
            id="idm140546708892512"
            class="indexterm"></a><a
            id="idm140546708891392"
            class="indexterm"></a><a
            id="idm140546708890272"
            class="indexterm"></a><a
            id="idm140546708889152"
            class="indexterm"></a><div
            class="para">
				Además del archivo <code
              class="filename">control</code>, el compendio <code
              class="filename">control.tar.gz</code> de cada paquete Debian puede contener una cantidad de scripts que serán ejecutados por <code
              class="command">dpkg</code> en diferentes etapas del procesamiento de un paquete. La Normativa Debian describe los casos posibles en detalle, especificando los scripts que serán llamados y los argumentos que recibirán. Estas secuencias pueden ser complicadas ya que si falla uno de los scripts <code
              class="command">dpkg</code> intentará volver a un estado satisfactorio cancelando la instalación o eliminación en curso (siempre que sea posible).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>YENDO MÁS ALLÁ</em></span> Base de datos de <code
                        class="command">dpkg</code></strong></p></div></div></div><a
              id="idm140546708883888"
              class="indexterm"></a><a
              id="idm140546708882768"
              class="indexterm"></a><div
              class="para">
				Todos los scripts de configuración para los paquetes instalados se almacenan en el directorio <code
                class="filename">/var/lib/dpkg/info/</code> en forma de un archivo con el nombre del paquete como prefijo. Este directorio también incluye un archivo con la extensión <code
                class="filename">.list</code> para cada paquete que contiene una lista de los archivos que pertenecen a dicho paquete.
			</div><div
              class="para">
				El archivo <code
                class="filename">/var/lib/dpkg/status</code> contiene una serie de bloques de datos (en el famoso formato de cabeceras de correo, RFC 2822) que describen el estado de cada paquete. La información del archivo <code
                class="filename">control</code> también es duplicada allí.
			</div></div><div
            class="para">
				En general, se ejecuta el script <code
              class="filename">preinst</code> antes de la instalación del paquete, y <code
              class="filename">postinst</code> luego. De la misma forma, se invoca <code
              class="filename">prerm</code> antes de la eliminación de un paquete y <code
              class="filename">postrm</code> luego. Actualizar un paquete es equivalente a eliminar la versión anterior e instalar la nueva. No es posible describir en detalle todos los escenarios posibles aquí, pero discutiremos los dos más comunes: instalación/actualización y eliminación.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>PRECAUCIÓN</em></span> Nombres simbólicos de los scripts</strong></p></div></div></div><div
              class="para">
				Las secuencias descriptas en esta sección llaman scripts de configuración por sus nombres específicos, como <code
                class="command">old-prerm</code> o <code
                class="command">new-postinst</code>. Ellos son, respectivamente, el script <code
                class="command">prerm</code> en la versión antigua del paquete (instalada antes de la actualización) y el script <code
                class="command">postinst</code> en la nueva versión (instalada en la actualización).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Diagramas de estado</strong></p></div></div></div><div
              class="para">
				Manoj Srivastava realizó estos diagramas explicando cómo <code
                class="command">dpkg</code> llama a estos scripts de configuración. El proyecto Debian Women («Mujeres Debian») también desarrolló diagramas similares; más simples de entender pero menos completos. <div
                class="url">→ <a
                  href="http://people.debian.org/~srivasta/MaintainerScripts.html">http://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                class="url">→ <a
                  href="http://wiki.debian.org/MaintainerScripts">http://wiki.debian.org/MaintainerScripts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708868016"></a>5.2.2.1. Instalación y actualización</h4></div></div></div><a
              id="idm140546708867248"
              class="indexterm"></a><div
              class="para">
					Esto es lo que ocurre durante una instalación (o actualización):
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							En una actualización, <code
                      class="command">dpkg</code> ejecuta <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">nueva-versión</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							En una actualización <code
                      class="command">dpkg</code> ejecuta luego <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">antigua-versión</em></code>; para una primera instalación ejecuta <code
                      class="command">new-preinst install</code>. También puede agregar la versión anterior en el último parámetro si el paquete ya ha sido instalada y eliminada desde entonces (pero no purgada, se mantuvieron los archivos de configuración).
						</div></li><li
                  class="listitem"><div
                    class="para">
							Se descomprimen los archivos del nuevo paquete. Si un archivo ya existe, es reemplazado pero se guarda una copia de respaldo de forma temporal.
						</div></li><li
                  class="listitem"><div
                    class="para">
							En una actualización, <code
                      class="command">dpkg</code> ejecuta <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">nueva-versión</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> actualiza toda su información interna (lista de archivos, scripts de configuración, etc.) y elimina los respaldos de los archivos reemplazados. Este es el punto sin retorno: <code
                      class="command">dpkg</code> ya no tiene acceso a todos los elementos necesarios para volver al estado anterior.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> actualizará los archivos de configuración, pidiéndole al usuario que decida si no es capaz de administrar esta tarea automáticamente. Los detalles de este proceso son discutidos en la <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">Sección 5.2.3, “Sumas de verificación («checksum»), lista de archivos de configuración”</a>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Finalmente, <code
                      class="command">dpkg</code> configura el paquete ejecutando <code
                      class="command">new-postinst configure <em
                        class="replaceable">última-versión-configurada</em></code>.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140546708849840"></a>5.2.2.2. Eliminación de un paquete</h4></div></div></div><div
              class="para">
					Esto es lo que sucede durante la eliminación de un paquete:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> ejecuta <code
                      class="command">prerm remove</code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> elimina todos los archivos del paquete, con la excepción de los archivos de configuración y scripts de configuración.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> ejecuta <code
                      class="command">postrm remove</code>. Se eliminan todos los scripts de configuración excepto <code
                      class="filename">postrm</code>. Si el usuario no utilizó la opción «purgar» («purge»), el proceso termina aquí.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Para eliminar completamente un paquete (con la orden <code
                      class="command">dpkg --purge</code> o <code
                      class="command">dpkg -P</code>), los archivos de configuración también son eliminados junto con una cantidad de copias (<code
                      class="filename">*.dpkg-tmp</code>, <code
                      class="filename">*.dpkg-old</code>, <code
                      class="filename">*.dpkg-new</code>) y archivos temporales; luego <code
                      class="command">dpkg</code> ejecuta <code
                      class="command">postrm purge</code>.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARIO</em></span> Purgar, una eliminación completa</strong></p></div></div></div><a
                id="idm140546708836784"
                class="indexterm"></a><div
                class="para">
					Cuando un paquete de Debian es eliminado, se mantienen los archivos de configuración para facilitar una posible reinstalación. De la misma forma, se mantienen normalmente los datos generados por un demonio (como el contenido de un servidor de directorio LDAP o el contenido de una base de datos de un servidor SQL).
				</div><div
                class="para">
					Para eliminar todos los datos asociados con un paquete es necesario «purgar» el paquete con la orden <code
                  class="command">dpkg -P <em
                    class="replaceable">paquete</em></code>, <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">paquete</em></code> o <code
                  class="command">aptitude purge <em
                    class="replaceable">paquete</em></code>.
				</div><div
                class="para">
					Given the definitive nature of such data removals, a purge should not be taken lightly.
				</div></div><a
              id="idm140546708831440"
              class="indexterm"></a><div
              class="para">
					Los cuatro scripts que aparecen detallados anteriormente se complementan con un script <code
                class="filename">config</code> provisto por los paquetes que utilizan <code
                class="command">debconf</code> para adquirir información de configuración del usuario. Durante la instalación este script define en detalle las preguntas realizadas por <code
                class="command">debconf</code>. Se graban las respuestas en la base de datos de <code
                class="command">debconf</code> para futuras referencias. Generalmente <code
                class="command">apt</code> ejecuta el script antes de instalar los paquetes uno por uno para agrupar las preguntas y realizarlas todas al usuario al comienzo del proceso. Los scripts de pre y postinstalación pueden utilizar esta información para operar según los deseos del usuario.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HERRAMIENTA</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="idm140546708825264"
                class="indexterm"></a><div
                class="para">
					Se creó <code
                  class="command">debconf</code> para resolver un problema recurrente en Debian. Todos los paquetes Debian que no pueden funcionar sin un mínimo de configuración solían hacer preguntas ejecutando <code
                  class="command">echo</code> y <code
                  class="command">read</code> en scripts <code
                  class="filename">postinst</code> (y otros scripts similares). Pero esto también resultaba que durante una instalación o actualización grande el usuario debía mantenerse frente al equipo para responder a las varias preguntas que podían surgir en cualquier momento. Se han evitado la mayoría de todas estas interacciones manuales gracias a la herramienta <code
                  class="command">debconf</code>.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> tiene muchas funcionalidades interesantes: requiere que el desarrollador especifique la interacción con el usuario, permite localización de todas las cadenas mostradas a los usuarios (se guardan todas las traducciones en el archivo <code
                  class="filename">templates</code> describiendo las interacciones), tiene diferentes interfaces para presentar las preguntas al usuario (modo texto, modo gráfico, no interactivo) y permite la creación de una base de datos central de respuestas para compartir la misma configuración entre varios equipos... pero la más importante es que ahora es posible presentar al usuario todas las preguntas juntas antes de comenzar un largo proceso de instalación o actualización. Mientras el sistema se encarga de la instalación por sí mismo, el usuario puede ocuparse de otras tareas sin necesidad de quedarse mirando la pantalla esperando preguntas.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.conffiles"></a>5.2.3. Sumas de verificación («checksum»), lista de archivos de configuración</h3></div></div></div><a
            id="idm140546708817040"
            class="indexterm"></a><a
            id="idm140546708815920"
            class="indexterm"></a><a
            id="idm140546708814800"
            class="indexterm"></a><a
            id="idm140546708813840"
            class="indexterm"></a><a
            id="idm140546708812432"
            class="indexterm"></a><div
            class="para">
				Además de los scripts de gestión y los datos de control mencionados en las secciones anteriores, el compendio <code
              class="filename">control.tar.gz</code> en un paquete Debian puede contener otros archivos interesantes. El primero, <code
              class="filename">md5sums</code> contiene una lista sumas de verificación MD5 de todos los archivos del paquete. Su principal ventaja es que permite que herramientas como <code
              class="command">debsums</code> (que estudiaremos en la <a
              class="xref"
              href="sect.supervision.html#sect.debsums">Sección 14.3.3.1, “Auditoría de paquetes: <code
                class="command">debsums</code> y sus límites”</a>) chequeen si estos archivos fueron modificados desde su instalación. Sepa que cuando este archivo no existe, <code
              class="command">dpkg</code> lo generará dinámicamente en el momento de la instalación (y lo almacenará en la base de datos de dpkg al igual que cualquier otro archivo de control).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> enumera los archivos del paquete que tienen que administrarse como archivos de configuración. El administrador puede modificar los archivos de configuración y <code
              class="command">dpkg</code> intentará preservar estos cambios durante la actualización de un paquete.
			</div><div
            class="para">
				De hecho, en esta situación, <code
              class="command">dpkg</code> se comporta tan inteligentemente como le es posible: si el archivo de configuración estándar no fue modificado entre dos versiones, no hace nada. Si, sin embargo, el archivo cambió intentará actualizar este archivo. Son posibles dos casos: o bien el administrador no modificó el archivo, en cuyo caso <code
              class="command">dpkg</code> automáticamente instalará la nueva versión; o el archivo fue modificado, en cuyo caso <code
              class="command">dpkg</code> le preguntará al administrador qué versión desea utilizar (la antigua con modificaciones o la nueva provista con el paquete). Para asistirlo en esta decisión <code
              class="command">dpkg</code> ofrece mostrar las diferencias entre las dos versiones («<code
              class="command">diff</code>»). Si el usuario decide mantener la versión anterior, la nueva será almacenada en la misma ubicación con el sufijo <code
              class="filename">.dpkg-dist</code>. Si el usuario selecciona la nueva versión, se mantiene la versión anterior en la misma ubicación con el sufijo <code
              class="filename">.dpkg-old</code>. Otra acción posible consiste en interrumpir momentáneamente <code
              class="command">dpkg</code> para editar el archivo e intentar rehacer las modificaciones relevantes (identificadas previamente con <code
              class="command">diff</code>).
			</div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>YENDO MÁS ALLÁ</em></span> Evitando preguntas sobre los archivos de configuración</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> administra la actualización de los archivos de configuración pero interrumpe estas operaciones frecuentemente mientras trabaja para pedir información al administrador. Esto lo hace menos placentero para aquellos que desean ejecutar actualizaciones de forma no interactiva. Es por esto que éste programa ofrece opciones que le permiten al sistema responder automáticamente según la misma lógica: <code
                class="command">--force-confold</code> mantiene los archivos de configuración anteriores; <code
                class="command">--force-confnew</code> utilizará la nueva versión del archivo (se respetan estas opciones aún cuando el archivo no fue modificado por el administrador, que rara vez tienen el efecto deseado). Agregar la opción <code
                class="command">--force-confdef</code> le indica a <code
                class="command">dpkg</code> que decida por su cuenta cuando sea posible (en otras palabras, cuando el archivo de configuración original no fue modificado) y sólo utilice <code
                class="command">--force-confnew</code> o <code
                class="command">--force-confold</code> para los otros casos.
			</div><div
              class="para">
				Estas opciones sólo son válidas para <code
                class="command">dpkg</code>, pero la mayor parte del tiempo el administrador trabajará directamente con los programas <code
                class="command">aptitude</code> o <code
                class="command">apt-get</code>. Es, por lo tanto, necesario saber la sintaxis necesaria para indicar las opciones a pasar a <code
                class="command">dpkg</code> (sus opciones son muy similares).
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</code></strong></pre><div
              class="para">
				Puede almacenar estas opciones directamente en la configuración de <code
                class="command">apt</code>. Para esto, simplemente escriba la siguiente línea en el archivo <code
                class="filename">/etc/apt/apt.conf.d/local</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }
</pre></div><div
              class="para">
				Incluir esta opción en el archivo de configuración singifica que también será utilizada en una interfaz gráfica como <code
                class="command">aptitude</code>.
			</div></div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>YENDO MÁS ALLÁ</em></span> Obligando a dpkg a preguntar sobre los archivos de configuración</strong></p></div></div></div><div
              class="para">
				La opción <code
                class="command">--force-confask</code> obliga a <code
                class="command">dpkg</code> a mostrar las preguntas sobre archivos de configuración aún en los casos en los que no serían necesarias normalmente. Por lo tanto, al reinstalar un paquete con esta opción <code
                class="command">dpkg</code> preguntará nuevamente sobre todos los archivos de configuración modificados por el administrador. Esto es muy conveniente, especialmente para reinstalar el archivo de configuración original si éste fue borrado y no posee otra copia disponible: una reinstalación normal no funcionará porque <code
                class="command">dpkg</code> considera la eliminación como una forma legítima de modificación del archivo por lo que no lo instalará nuevamente.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Anterior</strong>Capítulo 5. Sistema de paquetes: herramientas y p...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Siguiente</strong>5.3. Estructura de un paquete fuente</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.package-meta-information.html">ar-MA</a></li><li><a
              href="../da-DK/sect.package-meta-information.html">da-DK</a></li><li><a
              href="../de-DE/sect.package-meta-information.html">de-DE</a></li><li><a
              href="../el-GR/sect.package-meta-information.html">el-GR</a></li><li><a
              href="../en-US/sect.package-meta-information.html">en-US</a></li><li><a
              href="../es-ES/sect.package-meta-information.html">es-ES</a></li><li><a
              href="../fa-IR/sect.package-meta-information.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.package-meta-information.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.package-meta-information.html">hr-HR</a></li><li><a
              href="../id-ID/sect.package-meta-information.html">id-ID</a></li><li><a
              href="../it-IT/sect.package-meta-information.html">it-IT</a></li><li><a
              href="../ja-JP/sect.package-meta-information.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.package-meta-information.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.package-meta-information.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.package-meta-information.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.package-meta-information.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.package-meta-information.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.package-meta-information.html">zh-CN</a></li></ul></div></body></html>
