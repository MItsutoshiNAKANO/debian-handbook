<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">15.2. Creación de su primer paquete</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Retroadaptación, Recompilación, Paquete fuente, Repositorio, Metapaquete, Desarrollador Debian, Responsable" /><link
        rel="home"
        href="index.html"
        title="El libro del administrador de Debian" /><link
        rel="up"
        href="debian-packaging.html"
        title="Capítulo 15. Creación de un paquete Debian" /><link
        rel="prev"
        href="debian-packaging.html"
        title="Capítulo 15. Creación de un paquete Debian" /><link
        rel="next"
        href="sect.setup-apt-package-repository.html"
        title="15.3. Creación de un repositorio de paquetes para APT" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/es-ES/sect.building-first-package.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Anterior</strong></a></li><li
          class="home">El libro del administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.building-first-package"></a>15.2. Creación de su primer paquete</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140474907434496"></a>15.2.1. Metapaquetes o paquetes falsos</h3></div></div></div><div
            class="para">
				Los paquetes falsos y los metapaquetes son similares en que son cascarones vacíos que sólo existen por los efectos que tienen sus metadatos en el sistema de gestión de paquetes.
			</div><div
            class="para">
				El propósito de un paquete falso es engañar a <code
              class="command">dpkg</code> y <code
              class="command">apt</code> para que crean que un paquete está instalado. Esto permite satisfacer las dependencias de un paquete cuando se instaló el software correspondiente fuera del alcance del sistema de paquetes. Este método funciona, pero debería evitarlo siempre que sea posible ya que no hay garantías que el software instalado manualmente se comporta exactamente de la misma forma que el paquete correspondiente y que otros paquetes que dependan de él funcionarán correctamente.
			</div><div
            class="para">
				Por el otro lado, un metapaquete existe principalmetne como una colección de dependencias, para que su instalación incluya un conjunto de otros paquetes en un solo paso.
			</div><div
            class="para">
				Puede crear ambos tipos de paquetes con los programas <code
              class="command">equivs-control</code> y <code
              class="command">equivs-build</code> (en el paquete <span
              class="pkg pkg">equivs</span>). Si ejecuta <code
              class="command">equivs-control <em
                class="replaceable">archivo</em></code> creará un archivo de cabecera de un paquete Debian que debe editar para que contenga el nombre esperado del paquete, su número de versión, el nombre de su encargado, sus dependencias y su descripción. Puede eliminar todos los demás campos sin un valor predeterminado ya que son opcionales. Los campos <code
              class="literal">Copyright</code>, <code
              class="literal">Changelog</code>, <code
              class="literal">Readme</code> y <code
              class="literal">Extra-Files</code> no son campos estándar en los paquetes Debian, sólo tienen sentido dentro del alcance de <code
              class="command">equivs-build</code> y no serán mantenidos en las cabeceras del paquete generado.
			</div><div
            class="example"><a
              id="idm140474907335696"></a><p
              class="title"><strong>Ejemplo 15.2. Archivo de cabecera del paquete falso <span
                  class="emphasis"><em>libxml-libxml-perl</em></span></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Section: perl
Priority: optional
Standards-Version: 3.8.4

Package: libxml-libxml-perl
Version: 1.57-1
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Depends: libxml2 (&gt;= 2.6.6)
Architecture: all
Description: Fake package - module manually installed in site_perl
 This is a fake package to let the packaging system
 believe that this Debian package is installed. 
 .
 In fact, the package is not installed since a newer version
 of the module has been manually compiled &amp; installed in the
 site_perl directory.
</pre></div></div><div
            class="para">
				EL siguiente paso es generar el paquete Debian ejecutando <code
              class="command">equivs-build <em
                class="replaceable">archivo</em></code>. Voilà: se creó el paquete en el directorio actual y lo puede utilizar como cualquier otro paquete Debian.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140474907331968"></a>15.2.2. Simple compendio de archivos</h3></div></div></div><div
            class="para">
				Los administradores de Falcot Corp necesitaron crear un paquete Debian para facilitar el despliegue de un conjunto de documentos en una gran cantidad de equipos. El administrador a cargo de esta tarea primero leyó la «Guía del nuevo desarrollador de Debian» y luego comenzó a trabajar en su primer paquete. <div
              class="url">→ <a
                href="http://www.debian.org/doc/maint-guide/index.es.html">http://www.debian.org/doc/maint-guide/index.es.html</a></div>
			</div><div
            class="para">
				El primer paso es crear un directorio <code
              class="filename">falcot-data-1.0</code> que contendrá el paquete fuente objetivo. El paquete, lógicamente, se llamará <code
              class="literal">falcot-data</code> y tendrá el número de versión <code
              class="literal">1.0</code>. El administrador luego ubicará los archivos de documentos en un subdirectorio <code
              class="filename">data</code>. Luego ejecutará <code
              class="command">dh_make</code> (del paquete <span
              class="pkg pkg">dh-make</span>) para agregar los archivos necesarios para el proceso de generación del paquete, que serán almacenados en un subdirectorio <code
              class="filename">debian</code>:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd falcot-data-1.0</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>dh_make --native</code></strong>
<code
              class="computeroutput">
Type of package: single binary, indep binary, multiple binary, library, kernel module, kernel patch or cdbs?
 [s/i/m/l/k/n/b] </code><strong
              class="userinput"><code>i</code></strong>
<code
              class="computeroutput">
Maintainer name : Raphael Hertzog
Email-Address   : hertzog@debian.org
Date            : Mon, 11 Apr 2011 15:11:36 +0200
Package Name    : falcot-data
Version         : 1.0
License         : blank
Usind dpatch    : no
Type of Package : Independent
Hit &lt;enter&gt; to confirm:
Currently there is no top level Makefile. This may require additional tuning.
Done. Please edit the files in the debian/ subdirectory now. You should also
check that the falcot-data Makefiles install into $DESTDIR and not in / .
$</code></pre><div
            class="para">
				El tipo de paquete seleccionado (<span
              class="emphasis"><em>binario único</em></span>: «single binary») indica que este paquete fuente generará sólo un paquete binario que depende de la arquitectura (<code
              class="literal">Architecture: any</code>. <span
              class="emphasis"><em>Binario independiente</em></span> («indep binary») es lo contrario y generará sólo un paquete binario que no depende de la arquitectura objetivo (<code
              class="literal">Architecture: all</code>). En este caso, esta última opción es más relevante ya que el paquete sólo contendrá documentos y ningún programa binario, por lo que se lo puede utilizar de la misma forma en equipos de cualquier arquitectura.
			</div><div
            class="para">
				El tipo <span
              class="emphasis"><em>binario múltiple</em></span> («multiple binary») corresponde a un paquete fuente que generará varios paquetes binarios. Un caso particular, <span
              class="emphasis"><em>biblioteca</em></span> («library»), es útil para bibliotecas compartidas ya que necesitan seguir reglas de empaquetado estrictas. De forma similar, debería restringir el uso de <span
              class="emphasis"><em>módulo de núcleo</em></span> («kernel module») a paquetes que contengan módulos de núcleo. Finalmente, <span
              class="emphasis"><em>cdbs</em></span> es un sistema de creación de paquetes específico; es bastante flexible pero necesita un poco de aprendizaje. <a
              id="idm140474907316624"
              class="indexterm"></a> <a
              id="idm140474907315984"
              class="indexterm"></a>
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Nombre y dirección de correo del encargado</strong></p></div></div></div><div
              class="para">
				La mayoría de los programas involucrados al mantener paquetes buscarán su nombre y dirección de correo en las variables de entorno <code
                class="varname">DEBFULLNAME</code> y <code
                class="varname">DEBEMAIL</code> o <code
                class="varname">EMAIL</code>. Definirlas de una vez y para siempre le evitará tener que ingresarlas varias veces. Si su consola usual es <code
                class="command">bash</code>, es simple cuestión de agregar las siguientes dos líneas a sus archivos <code
                class="filename">~/.bashrc</code> y <code
                class="filename">~/.bash_profile</code> (¡obviamente reemplazará los valores con unos más relevantes!):
			</div><pre
              class="programlisting">
export EMAIL="hertzog@debian.org"
export DEBFULLNAME="Raphael Hertzog"
</pre></div><div
            class="para">
				El programa <code
              class="command">dh_make</code> crea un subdirectorio <code
              class="filename">debian</code> con muchos archivos. Algunos son necesarios, en particular <code
              class="filename">rules</code>, <code
              class="filename">control</code>, <code
              class="filename">changelog</code> y <code
              class="filename">copyright</code>. Los archivos con extensión <code
              class="filename">.ex</code> son archivos de ejemplo que puede utilizar modificándolos (y eliminando la extensión) cuando necesite. Si no los necesita, le recomendamos eliminarlos. Debe mantener el archivo <code
              class="filename">compat</code> ya que es necesario para que funcione correctamente la suite de programas <span
              class="emphasis"><em>debhelper</em></span> (todos los que comienzan con el prefijo <code
              class="command">dh_</code>) que son utilizados en varias etapas del proceso de creación del paquete.
			</div><div
            class="para">
				El archivo <code
              class="filename">copyright</code> debe contener la información sobre los autores de los documentos incluidos en el paquete y las licencias relacionadas. En nuestro caso, éstos son documentos internos y su uso está restringido al interior de la empresa Falcot Corp. El archivo <code
              class="filename">changelog</code> predeterminado generalmente es apropiado; reemplace «Initial release» con una explicación más detallada y basta con cambiar la distribución de <code
              class="literal">unstable</code> a <code
              class="literal">internal</code>. También actualizamos el archivo <code
              class="filename">control</code>: modificamos la sección a <span
              class="emphasis"><em>misc</em></span> y eliminamos los campos <code
              class="literal">Homepage</code>, <code
              class="literal">Vcs-Git</code> y <code
              class="literal">Vcs-Browser</code>. Completamos los campos <code
              class="literal">Depends</code> con <code
              class="literal">iceweasel | www-browser</code> para asegurar que exista un navegador web disponible capaz de mostrar los documentos en el paquete.
			</div><div
            class="example"><a
              id="idm140474907298288"></a><p
              class="title"><strong>Ejemplo 15.3. El archivo <code
                  class="filename">control</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Source: falcot-data
Section: misc
Priority: optional
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Build-Depends: debhelper (&gt;= 7.0.50~)
Standards-Version: 3.8.4

Package: falcot-data
Architecture: all
Depends: iceweasel | www-browser, ${misc:Depends}
Description: Internal Falcot Corp Documentation
 This package provides several documents describing the internal
 structure at Falcot Corp.  This includes:
  - organization diagram
  - contacts for each department.
 .
 These documents MUST NOT leave the company.
 Their use is INTERNAL ONLY.
</pre></div></div><div
            class="example"><a
              id="idm140474907296000"></a><p
              class="title"><strong>Ejemplo 15.4. El archivo <code
                  class="filename">changelog</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
falcot-data (1.0) internal; urgency=low

  * Initial Release.
  * Let's start with few documents:
    - internal company structure;
    - contacts for each department.

 -- Raphael Hertzog &lt;hertzog@debian.org&gt;  Mon, 11 Apr 2011 20:46:33 +0200
</pre></div></div><div
            class="example"><a
              id="idm140474907294016"></a><p
              class="title"><strong>Ejemplo 15.5. El archivo <code
                  class="filename">copyright</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
This work was packaged for Debian by Raphael Hertzog &lt;hertzog@debian.org&gt;
on Mon, 11 Apr 2011 20:46:33 +0200

Copyright:

    Copyright (C) 2004-2011 Falcot Corp

License:

    All rights reserved.
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> El archivo <code
                        class="filename">Makefile</code></strong></p></div></div></div><a
              id="idm140474907290640"
              class="indexterm"></a><div
              class="para">
				Un archivo <code
                class="filename">Makefile</code> es un script utilizado por el programa <code
                class="command">make</code>; describe las reglas para crear un conjunto de archivos desde otros en un árbol de dependencias (por ejemplo, podemos compilar un programa desde un conjunto de archivos fuente). El archivo <code
                class="filename">Makefile</code> describe estas reglas en el siguiente formato:
			</div><pre
              class="programlisting">
target: source1 source2 ...
        command1
        command2
</pre><div
              class="para">
				La interpretación de esta regla es como sigue: si uno de los archivos <code
                class="literal">fuente*</code> es más reciente que el archivo <code
                class="literal">objetivo</code>, entonces es necesario generar el objetivo utilizando <code
                class="command">orden1</code> y <code
                class="command">orden2</code>.
			</div><div
              class="para">
				Sepa que las líneas de órdenes deben comenzar con un carácter de tabulación; también debe saber que cuando una línea de órdenes comienza con un carácater de guión (<code
                class="literal">-</code>), si éste falla no interrumpirá todo el proceso.
			</div></div><div
            class="para">
				El archivo <code
              class="filename">rules</code> generalmente contiene un conjunto de reglas utilizadas para configurar, compilar e instalar el software en un subdirectorio dedicado (cuyo nombre coincide con el del paquete binario generado). Luego se incluye el contenido de este subdirectorio en el compendio del paquete Debian como si fuera la raíz del sistema de archivos. En nuestro caso, se instalarán los archivos en el subdirectorio <code
              class="filename">debian/falcot-data/usr/share/falcot-data/</code> para que el paquete generado despliegue los archivos en <code
              class="filename">/usr/share/falcot-data/</code>. Se utiliza el archivo <code
              class="filename">rules</code> como si fuera un archivo <code
              class="filename">Makefile</code>, con unos pocos objetivos estándar (incluyendo <code
              class="literal">clean</code> y <code
              class="literal">binary</code>, utilizados para limpiar el directorio fuente y generar el paquete binario respectivamente).
			</div><div
            class="para">
				Si bien este archivo es el corazón del proceso, cada vez más contiene sólo el mínimo indispensable para ejecutar un conjunto estándar de programas que provee la herramienta <code
              class="command">debhelper</code>. Tal es el caso de los archivos generados por <code
              class="command">dh_make</code>. Para instalar nuestros archivos simplemente configuraríamos el comportamiento de <code
              class="command">dh_install</code> creando el siguiente archivo <code
              class="filename">debian/falcot-data.install</code>:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/
</pre><div
            class="para">
				En este punto, podemos crear el paquete. Sin embargo, agregaremos una capa de pintura. Debido a que los administradores desean que se pueda acceder fácilmente a los documentos desde el menú de ayuda de los entornos gráficos de escritorio, crearemos un elemento en el sistema de menús Debian. Haremos esto simplemente cambiando el nombre de <code
              class="filename">debian/menu.ex</code> para eliminar su extensión y editándolo como sigue:
			</div><div
            class="example"><a
              id="idm140474886398096"></a><p
              class="title"><strong>Ejemplo 15.6. El archivo <code
                  class="filename">menu</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
?package(falcot-data):needs=X11|wm section=Help\
  title="Internal Falcot Corp Documentation" \
  command="/usr/bin/x-www-browser /usr/share/falcot-data/index.html"
?package(falcot-data):needs=text section=Help\
  title="Internal Falcot Corp Documentation" \
  command="/usr/bin/www-browser /usr/share/falcot-data/index.html"
</pre></div></div><div
            class="para">
				Cuando definimos al campo <code
              class="literal">needs</code> como <code
              class="literal">X11|wm</code>, indicamos que este elemento sólo tiene sentido en una interfaz gráfica. Por lo tanto, sólo será integrado en los menús de aplicaciones gráficas (X11) y gestores de ventanas (de allí <code
              class="literal">wm</code>). El campo <code
              class="literal">section</code> indica en qué parte del menú debería mostrar el elemento. En nuestro caso, nuestro elemento se encontrará en el menú «Help». El campo <code
              class="literal">title</code> contiene el texto que será mostrado en el menú. Finalmente, el campo <code
              class="literal">command</code> describe el programa a ejecutar cuando el usuario seleccione el elemento del menú.
			</div><div
            class="para">
				El segundo elemento coincide con el primero, con ligeras adaptaciones parar el modo de texto de la consola Linux.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NORMATIVA DEBIAN</em></span> Organización del menú</strong></p></div></div></div><div
              class="para">
				Los menús Debian están organizados en una estructura formal, documentada en el texto siguiente: <div
                class="url">→ <a
                  href="http://www.debian.org/doc/packaging-manuals/menu-policy/">http://www.debian.org/doc/packaging-manuals/menu-policy/</a></div>
			</div><div
              class="para">
				Debe elegir el campo <code
                class="literal">section</code> de un archivo <code
                class="filename">menu</code> de entre alguno de los mencionados en la lista de dicho documento.
			</div></div><div
            class="para">
				Simplemente crear el archivo <code
              class="filename">debian/menu</code> es suficiente para activar el menú en el paquete ya que <code
              class="command">dh</code> ejecutará automáticamente el programa <code
              class="command">dh_installmenu</code> durante el proceso de creación del paquete.
			</div><div
            class="para">
				Ahora nuestro paquete fuente está listo. Todo lo que falta es generar el paquete binario con el mismo método que utilizamos para recompilar paquetes: ejecutaremos <code
              class="command">dpkg-buildpackage -us -uc</code> desde el directorio <code
              class="filename">falcot-data-1.0</code>.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Anterior</strong>Capítulo 15. Creación de un paquete Debian</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Siguiente</strong>15.3. Creación de un repositorio de paquetes para...</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.building-first-package.html">ar-MA</a></li><li><a
              href="../da-DK/sect.building-first-package.html">da-DK</a></li><li><a
              href="../de-DE/sect.building-first-package.html">de-DE</a></li><li><a
              href="../el-GR/sect.building-first-package.html">el-GR</a></li><li><a
              href="../en-US/sect.building-first-package.html">en-US</a></li><li><a
              href="../es-ES/sect.building-first-package.html">es-ES</a></li><li><a
              href="../fa-IR/sect.building-first-package.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.building-first-package.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.building-first-package.html">hr-HR</a></li><li><a
              href="../id-ID/sect.building-first-package.html">id-ID</a></li><li><a
              href="../it-IT/sect.building-first-package.html">it-IT</a></li><li><a
              href="../ja-JP/sect.building-first-package.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.building-first-package.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.building-first-package.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.building-first-package.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.building-first-package.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.building-first-package.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.building-first-package.html">zh-CN</a></li></ul></div></body></html>
